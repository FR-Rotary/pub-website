{% extends "base.html" %}
{% block title %} {{ g.strings.nav.index }} {% endblock%}

{% block content%}

<script type="module" src="{{ url_for('static', filename='js/beers.js') }}"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">

<div class="container mt-6 mb-6">
  <div class="box has-background">
    <label class="label">Add a new beer!</label>
    <p class="paragraph">Below you can fill in the form for the new beer to be added. Make sure to give the beer a reasonable 'Style' which makes sense when compared to all the other beers.</p>
    <div class="columns">
      <div class="column">
        <form action="{{ request.path }}" method="POST">
          {% include 'internal/_beer_form_fields.html' %}
          <div class="field">
            <div class="control">
              <button type="submit" formmethod="post" class="button is-link">Add</button>
            </div>
          </div>
        </form>
      </div>
      <div class="column">
        <a href="/internal/print_menu" class="button is-link">Print Menu</a>
      </div>
    </div>
  </div>

  <div class="flex is-flex-direction-row">
    <input class="input" type="text" id="searchInput" placeholder="Search by name..." style="width: 20%;">
    <div class="select">
      <select class="input" type="number" id="paginationInput">
        <option value="10">10</option>
        <option value="25" selected>25</option>
        <option value="50">50</option>
        <option value="75">75</option>
        <option value="100">100</option>
      </select>
    </div>
  </div>

  <div class="columns mt-2 mb-2">
    <div class="column">
      <div class="table-container box">
        <h2 class="title is-4">Unavailable</h2>
        <table id="unavailableBeersTable" class="table is-striped is-fullwidth is-narrow">
          <thead>
            <tr>
              <th width="30%">NAME</th>
              <th>VOL</th>
              <th>PRICE</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody id="unavailableBeersTableBody">
            {% for beer in beers %}
            {% if not beer.available %}
            <tr id={{beer.id}}>
              <td>
                <a href="https://untappd.com/search?q={{ beer.name }}&type=beer&sort=all" target="_blank">{{ beer.name }}</a>
              </td>
              <td>{{ beer.volume_ml }}ml</td>
              <td>{{ beer.price_kr }}kr</td>
              <td>
                <form action="{{ url_for('internal.delete_beer', n=beer.id) }}" method="POST">
                  <button type="submit" class="button hover-danger is-small uniform-button">Delete</button>
                </form>
                <form action="{{ url_for('internal.edit_beer', n=beer.id) }}" method="POST">
                  <a href="{{ url_for('internal.edit_beer', n=beer.id) }}" class="button hover-link is-small uniform-button">Edit</a>
                </form>
              </td>
              <td>
                <button class="button is-success arrow-right" data-url="{{ url_for('internal.toggle_beer', n=beer.id)}}">
                  <span class="icon arrow-right">
                    <i class="fas fa-arrow-right arrow-right"></i> <!-- Font Awesome -->
                  </span>
                </button>
              </td>
            </tr>
            {% endif %}
            {% endfor %}
          </tbody>
        </table>
        <nav id="unavailablePagination" class="pagination is-centered" role="navigation" aria-label="pagination">
          <a href="#" class="pagination-previous">Previous</a>
          <a href="#" class="pagination-next">Next page</a>
          <ul class="pagination-list"></ul>
        </nav>
      </div>
    </div>

    <div class="column">
      <div class="table-container box">
        <h2 class="title is-4">On Menu</h2>
        <table id="onMenuBeersTable" class="table is-striped is-fullwidth is-narrow">
          <thead>
            <tr>
              <th width="30%">NAME</th>
              <th>VOL</th>
              <th>PRICE</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody id="onMenuBeersTableBody">
            {% for beer in beers %}
            {% if beer.available %}
            <tr id={{beer.id}}>
              <td>
                <a href="https://untappd.com/search?q={{ beer.name }}&type=beer&sort=all" target="_blank">{{ beer.name }}</a>
              </td>
              <td>{{ beer.volume_ml }}ml</td>
              <td>{{ beer.price_kr }}kr</td>
              <td>
                <form action="{{ url_for('internal.delete_beer', n=beer.id) }}" method="POST">
                  <button type="submit" class="button hover-danger is-small uniform-button">Delete</button>
                </form>
                <form action="{{ url_for('internal.edit_beer', n=beer.id) }}" method="POST">
                  <a href="{{ url_for('internal.edit_beer', n=beer.id) }}" class="button hover-link is-small uniform-button">Edit</a>
                </form>
              </td>
              <td>
                <button class="button is-danger arrow-left" data-url="{{ url_for('internal.toggle_beer', n=beer.id)}}">
                  <span class="icon arrow-left">
                    <i class="fas fa-arrow-left arrow-left"></i> <!-- Font Awesome -->
                  </span>
                </button>
              </td>
            </tr>
            {% endif %}
            {% endfor %}
          </tbody>
        </table>
        <nav id="onMenuPagination" class="pagination is-centered" role="navigation" aria-label="pagination">
          <a href="#" class="pagination-previous">Previous</a>
          <a href="#" class="pagination-next">Next page</a>
          <ul class="pagination-list"></ul>
        </nav>
      </div>
    </div>
  </div>

  <h1 class="title">Ölkategorier</h1>
  <div class="box has-background">
    <label class="label">Add a new category!</label>
    <p class="paragraph">Below you can fill in the form for the category to be added. This should not be done often since new categories of beer rarely emerge. This should not be confused with the style property.</p>
    <form action="{{ url_for('internal.add_category') }}" method="POST">
      <table class="table is-narrow has-background">
        <tr>
          <td>Name SV: </td>
          <td> 
            <input class="input" type="text" name="name_sv" placeholder="Suröl">
          </td>
        </tr>
        <tr>
          <td>Name EN: </td>
          <td>
            <input class="input" type="text" name="name_en" placeholder="Sour beer">
          </td>
        </tr>
        <tr>
          <td>Priority </td>
          <td>
            <input class="input" type="text" name="priority" placeholder="69">
          </td>
        </tr>
      </table>
      <button type="submit" formmethod="post" class="button is-link">Add</a>
    </form>
  </div>

  <div class="table-container">
    <table class="table is-striped is-fullwidth is-narrow">
      <thead>
        <tr>
          <th>NAME SV</th>
          <th>NAME EN</th>
          <th width="10%">PRIORITY</th>
          <th width="10%"></th>
        </tr>
      </thead>
      <tbody>
        {% for category in categories %}
        <tr>
          <td>{{ category.name }}</td>
          <td>{{ category.name_en }}</td>
          <td>{{ category.priority }}</td>
          <td>
            <form action="{{ url_for('internal.edit_category', n=category.id) }}" method="POST">
              <a href="{{ url_for('internal.edit_category', n=category.id) }}" class="button is-link is-small uniform-button">Edit</a>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
