{% autoescape false %}
\documentclass[11pt,a4paper]{extarticle}
\usepackage[margin=0.5cm, bottom=1.2cm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[swedish]{babel}
\usepackage{parskip}
\usepackage{float}
\usepackage{tabularx}
\usepackage[table]{xcolor}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{datetime}
\usepackage{fancyhdr}

\DeclareUnicodeCharacter{202F}{\,}
\captionsetup{
    labelformat=empty,
    aboveskip=0.2cm,
    singlelinecheck=false
}
\newcolumntype{C}{>{\centering\arraybackslash}X}
\renewcommand{\arraystretch}{1.3}

% Set date format to ISO standard
\renewcommand{\dateseparator}{-}
\newdateformat{iso}{\THEYEAR-\twodigit{\THEMONTH}-\twodigit{\THEDAY}}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[R]{\iso\today}
\renewcommand{\headrulewidth}{0pt}

\begin{document}
\begin{center}
    \Huge
    \textbf{D R I C K B A R T}
\end{center}

{% for category in beer_categories %}
 {% if category.name != "Källarmeny" and category.beers %}
        \rowcolors{2}{gray!25}{white}
        \begin{table}[H]
            \caption{\large \textbf{ {{ category.name | escape_tex }} } }
            \begin{tabularx}{\textwidth{}}{
                X
                r
                >{\raggedleft{}}p{3em}
                >{\centering{}}p{2.7em}
                p{3.5em} % TODO: Right-align
                p{3em} % TODO: Right-align
            }
                {% for beer in category.beers %}
                    {{ beer.name | escape_tex }} &
                    {{ beer.style | escape_tex }} &
                    {{ beer.abv }} \% &
                    {{ to_letter_code(beer.country_code) }} &
                    {% if beer.volume_ml == -1 %}
                        Glas
                    {% else %}
                        {{ beer.volume_ml }} ml
                    {% endif %} &
                    {{ beer.price_kr }} kr \\
                {% endfor %}
            \end{tabularx}
        \end{table}
    {% endif %}
{% endfor %}

\newpage

\begin{center}
    \Huge
    \textbf{Ä T B A R T}
\end{center}

\rowcolors{2}{gray!25}{white}
\begin{table}[H]
    \caption{\large \textbf{ {{ g.strings.menu.food | escape_tex }} } }
    \begin{tabularx}{\textwidth}{X r}
        {% for food in foods %}
            {{ food.name | escape_tex }} &
            {{ food.price_kr }} kr \\
        {% endfor %}
    \end{tabularx}
\end{table}

\rowcolors{2}{gray!25}{white}
\begin{table}[H]
    \caption{\large \textbf{ {{ g.strings.menu.snacks | escape_tex }} } }
    \begin{tabularx}{\textwidth}{X r}
        {% for snack in snacks %}
            {{ snack.name | escape_tex }} &
            {{ snack.price_kr }} kr \\
        {% endfor %}
    \end{tabularx}
\end{table}

{% if beer_categories | selectattr("name", "equalto", "Källarmeny") | list %}
\newpage
\begin{center}
    \Huge
    \textbf{K Ä L L A R M E N Y}
\end{center}

\vspace{1cm}
\begin{center}
    \large
    Detta är lite speciellare/sällsyntare öl som vi inte har plats för i kylen och förvaras i våran ölkällare, perfekt att dela med några kompisar när man vill ha något extra speciellt. Detta betyder att de är förrådskalla när du beställer ölen vilket passar för de flesta av ölen men vi kan vid beställning eller intresse för senare köp lägga undan någon flaska så att du kan få den kallare när du vill dricka den.
    OBS! Det kan ta tid för de som jobbar att hitta ölen och om det är mycket att göra i baren kan personalen servera andra gäster innan den hämtar er flaska eller be er vänta vilket vi ber er ha översikt för. Eftersom denna lista inte underhålls lika flitigt som vår vanliga öllista betyder det att saker kan vara slut eller ligga på ett konstigt ställe där de som jobbar inte hittar i vilket fall våra bartenders gärna hjälper er att hitta något annat i liknande stil.
\end{center}
{% for category in beer_categories %}
    {% if category.name == "Källarmeny" and category.beers %}
        \rowcolors{2}{gray!25}{white}
        \begin{table}[H]
            \caption{\large \textbf{ {{ category.name | escape_tex }} } }
            \begin{tabularx}{\textwidth{}}{
                X
                r
                >{\raggedleft{}}p{3em}
                >{\centering{}}p{2.7em}
                p{3.5em} % TODO: Right-align
                p{3em} % TODO: Right-align
            }
                {% for beer in category.beers %}
                    {{ beer.name | escape_tex }} &
                    {{ beer.style | escape_tex }} &
                    {{ beer.abv }} \% &
                    {{ to_letter_code(beer.country_code) }} &
                    {% if beer.volume_ml == -1 %}
                        Glas
                    {% else %}
                        {{ beer.volume_ml }} ml
                    {% endif %} &
                    {{ beer.price_kr }} kr \\
                {% endfor %}
            \end{tabularx}
        \end{table}
    {% endif %}
{% endfor %}
{% endif %}



\end{document}
{% endautoescape %}
